let pokemonRepository = (function () {
  let e = [],
    t = "https://pokeapi.co/api/v2/pokemon/?limit=150";
  document.querySelector("#modal-container");
  function o(t) {
    "object" == typeof t && "name" in t && "detailsUrl" in t
      ? e.push(t)
      : alert("Please enter valid Pokemon.");
  }
  function n(e) {
    a(e).then(function () {
      r(e);
    });
  }
  function r(e) {
    let t = $(".modal-title");
    t.empty();
    $(".modal-header");
    let o = $('<h1 style="color: white;">' + e.name + "</h1>"),
      n = $(".modal-body");
    n.empty();
    let r = $(
      '<img class="modal-img" alt="..." style="width: 50%; padding: 30px;">'
    );
    r.attr("src", e.imageUrl);
    let a = $(
        '<h4 style="background-color:#d88780; padding: 5px; color: white;">Profile</h4>'
      ),
      l = $("<p><strong>Height</strong>: " + e.height + "</p>"),
      s = $("<p><strong>Types</strong>: " + e.types + "</p>"),
      d = $("<p><strong>Abilities</strong>: " + e.abilities + "</p>");
    t.append(o),
      n.append(r),
      n.append(a),
      n.append(l),
      n.append(s),
      n.append(d),
      e.types.includes("grass")
        ? $(".modal-header").css("background-color", "rgb(120, 200, 80)")
        : e.types.includes("fire")
        ? $(".modal-header").css("background-color", "rgb(240, 128, 48)")
        : e.types.includes("poison")
        ? $(".modal-header").css("background-color", "rgb(168, 144, 240)")
        : e.types.includes("water")
        ? $(".modal-header").css("background-color", "rgb(104, 144, 240)")
        : e.types.includes("bug")
        ? $(".modal-header").css("background-color", "rgb(168, 184, 32)")
        : e.types.includes("water")
        ? $(".modal-header").css("background-color", "rgb(69, 120, 237)")
        : e.types.includes("ice")
        ? $(".modal-header").css("background-color", "rgb(66, 174, 174)")
        : e.types.includes("electric")
        ? $(".modal-header").css("background-color", "rgb(252, 234, 161)")
        : e.types.includes("ground")
        ? $(".modal-header").css("background-color", "rgb(219, 181, 77)")
        : e.types.includes("fairy")
        ? $(".modal-header").css("background-color", "rgb(232, 120, 144)")
        : e.types.includes("ghost")
        ? $(".modal-header").css("background-color", "rgb(100, 78, 136)")
        : e.types.includes("normal") &&
          $(".modal-header").css("background-color", "rgb(156, 156, 99)");
  }
  function a(e) {
    let t = e.detailsUrl;
    return fetch(t)
      .then(function (e) {
        return e.json();
      })
      .then(function (t) {
        (e.imageCard = t.sprites.other.dream_world.front_default),
          (e.imageUrl = t.sprites.other["official-artwork"].front_default),
          (e.height = t.height),
          (e.types = []),
          t.types.forEach(function (t) {
            e.types.push(t.type.name);
          }),
          (e.abilities = []),
          t.abilities.forEach(function (t) {
            e.abilities.push(t.ability.name);
          });
      })
      .catch(function (e) {
        console.error(e);
      });
  }
  return {
    getAll: function (t) {
      return e;
    },
    add: o,
    addListItem: function (e) {
      pokemonRepository.loadDetails(e).then(function () {
        let t = $(".row"),
          o = $(
            '<div class="card mt-3" style="width: 15rem; margin:13px;"></div>'
          ),
          r = $(
            '<img class="card-img-top mx-auto" style="width: 35%;" alt="...">'
          ),
          a = $('<h5 class="card-title">' + e.name + "</h5>");
        r.attr("src", e.imageCard);
        let l = $('<div class="card-body" style="text-align: center;"></div>'),
          s = $('<div class="card-footer bg-transparent border-info"></div>'),
          d = $(
            '<button type="button" class="btn" style="background-color: #A30000; color: white" data-toggle="modal" data-target="#pokemonModal">See Profile</button>'
          );
        t.append(o),
          o.append(r),
          o.append(l),
          l.append(a),
          l.append(s),
          s.append(d),
          d.on("click", function (t) {
            n(e);
          });
      });
    },
    loadList: function () {
      return fetch(t)
        .then(function (e) {
          return e.json();
        })
        .then(function (e) {
          e.results.forEach(function (e) {
            o({ name: e.name, detailsUrl: e.url });
          });
        })
        .catch(function (e) {
          console.error(e);
        });
    },
    loadDetails: a,
    showDetails: n,
    showModal: r,
  };
})();
function search() {
  let e, t, o, n, r, a, l;
  for (
    t = (e = document.getElementById("myInput")).value.toUpperCase(),
      n = (o = document.getElementById("myRow")).querySelectorAll(".card"),
      a = 0;
    a < n.length;
    a++
  )
    (l =
      (r = n[a].querySelector(".card-body").querySelector(".card-title"))
        .textContent || r.innerText)
      .toUpperCase()
      .indexOf(t) > -1
      ? (n[a].style.display = "")
      : (n[a].style.display = "none");
}
console.log(pokemonRepository.getAll()),
  pokemonRepository.loadList().then(function () {
    pokemonRepository.getAll().forEach(function (e) {
      pokemonRepository.addListItem(e);
    });
  });
